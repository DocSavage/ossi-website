---
// import merge from 'lodash.merge';
// import type { ImageMetadata } from 'astro';
import Layout from '~/layouts/PageLayout.astro';
import Headline from '~/components/blog/Headline.astro';
import List from '~/components/blog/List.astro';
// import SinglePost from '~/components/blog/SinglePost.astro';
// import ToBlogLink from '~/components/blog/ToBlogLink.astro';

// import { getCanonical, getPermalink } from '~/utils/permalinks';
import { fetchPosts } from '~/utils/blog';
// import { findImage } from '~/utils/images';

// export const prerender = true;

// export async function getStaticPaths () {
//   return await getStaticPathsBlogPost();
// }

// const { post } = Astro.props;

// const url = getCanonical(getPermalink(post.permalink, 'post'));
// const image = (await findImage(post.image)) as ImageMetadata | undefined;

// const metadata = merge(
//   {
//     title: post.title,
//     description: post.excerpt,
//     robots: {
//       index: blogPostRobots?.index,
//       follow: blogPostRobots?.follow,
//     },
//     openGraph: {
//       type: 'article',
//       ...(image ? { images: [{ url: image, width: image?.width, height: image?.height }] } : {}),
//     },
//   },
//   { ...(post?.metadata ? { ...post.metadata, canonical: post.metadata?.canonical || url } : {}) }
// );
import {getCollection} from "astro:content"
const blogPosts = await getCollection("blog")
const posts = await fetchPosts()
console.log(posts)
---

<Layout>
  <section class="px-6 sm:px-6 py-12 sm:py-16 lg:py-20 mx-auto max-w-4xl">
    <Headline
      subtitle="A statically generated blog example with news, tutorials, resources and other interesting content related to AstroWind"
    >
      The Blog
    </Headline>
    <List posts={posts}>
    <!--
      <PostTags tags={allCategories} class="mb-2" title="Search by Categories:" isCategory />
      <PostTags tags={allTags}  title="Search by Tags:" />
    -->
  </section>
</Layout>
